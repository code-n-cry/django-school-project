{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block title %}
  <title>{% translate "–û –∫–æ–º–∞–Ω–¥–µ" %}</title>
{% endblock %}
{% block content %}
  {% if team %}
    <div class="flex justify-center items-center">
      <div class="flex items-center max-w-full py-5 px-7">
        <img class="h-28 w-30 rounded object-cover mr-5" src="{{ team.get_avatar_300x300.url }}" alt="">
        <p class="text-5xl leading-normal text-center overflow-hidden overflow-ellipsis">{{ team.name }}</p>
      </div>
    </div>
    <div class="mx-auto container block h-full content-center flex-1 sm:flex">
      <div class="mr-5 h-full sm:w-2/3">
        {% if all_tasks_count %}
          <p>{% translate "–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞–Ω–∏–π" %}: {{ done_tasks_count }} –∏–∑ {{ all_tasks_count }}</p>
        {% endif %}
        {% if tasks %}
          <div class="mb-3">
            {% for task in tasks %}
              {% include 'tasks/includes/task_item.html' with task=task %}
            {% endfor %}
          </div>
        {% endif %}
        <div class="mt-1">
          {% translate "–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –Ω–∞–≤—ã–∫–∏" %}:
          <div class="flex space-x-3">
            {% for skill in team.skills.all %}
              <div class="px-2 py-1 border rounded dark:border-neutral-200">{{ skill.name }}</div>
            {% endfor %}
          </div>
        </div>
        <p class="mt-5">{{ team.detail }}</p>
      </div>
      <div class="mr-5 h-full sm:w-1/3">
        <div class="pt-12 sm:border-l sm:pt-2 sm:pl-5 border-neutral-500 h-auto">
          {% if is_lead %}
            <div class="mb-3">
              <a href="{% url 'tasks:create' team.pk %}">
                {% include "includes/button.html" with text="–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ" %}
              </a>
            </div>
          {% endif %}
          <div>
            <p>{% translate "–õ–∏–¥—ã –∫–æ–º–∞–Ω–¥—ã" %}:</p>
            {% for lead in team.leads.all %}
              <a href="">{{ lead.user.username }}</a>
            {% endfor %}
          </div>
          <div class="mt-5">
            <div>
              <p>{% translate "–£—á–∞—Å—Ç–Ω–∏–∫–∏" %}: </p>
              {% for team_member in team.members.all %}
                <a href="{% url 'users:user_detail' team_member.user.pk %}">{{ team_member.user.username }} {% if team_member.is_lead %} ({% translate '–ª–∏–¥ –∫–æ–º–∞–Ω–¥—ã' %}) {% endif %}</a><br>
              {% endfor %}
            </div>
            {% if member and member.is_lead and not team.is_open %}
              <a
                type="button"
                class="mt-3 inline-block rounded px-3 py-1 text-m font-small leading-normal text-white border border-neutral-500 hover:border-transparent shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]">
                {% translate "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π" %}
              </a>
            {% elif member and member.is_lead and team.is_open %}
              <a
                type="button"
                class="mt-3 inline-block rounded px-7 py-1 text-m font-small leading-normal text-white border border-neutral-500 hover:border-transparent shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]"
                href="{% url 'teams:requests' team.pk %}">
                {% translate "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ" %}
              </a>
            {% elif not member and team.is_open and request.user.is_authenticated %}
              <a
                href="{% url 'users:send_request' %}"
                class="text-center mt-3 inline-block rounded px-3 py-1 text-m font-small leading-normal text-white border border-neutral-500 hover:border-transparent shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]">
                {% translate "–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ" %}
              </a>
            {% endif %}
            {% if member.is_lead %}
              <a
                href="{% url 'teams:edit' team.pk %}"
                class="text-center mt-3 inline-block rounded px-3 py-1 text-m font-small leading-normal text-white border border-neutral-500 hover:border-transparent shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]">
                {% translate "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é/–Ω–∞–∑–Ω–∞—á–∏—Ç—å –∑–∞–¥–∞–Ω–∏—è –∏ –≤—Å—Ç—Ä–µ—á–∏" %}
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  {% else %}
    <p class="text-center text-3xl text-white">{% translate "–ò–∑–≤–∏–Ω–∏—Ç–µ, –∫–æ–º–∞–Ω–¥–∞ —Å–∫—Ä—ã—Ç–∞ –æ—Ç —á—É–∂–∏—Ö –≥–ª–∞–∑" %}üôà</p>
  {% endif %}
{% endblock %}
